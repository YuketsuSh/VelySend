<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VelySend</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.2/min/dropzone.min.css">
    <script src="https://cdn.tiny.cloud/1/gqsyll5b5xddmg9blp1h6i27e56ntb06o1tzzb2cbkd80jfd/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
    <script>
        tinymce.init({
            selector: '#email-body',
            menubar: false,
            plugins: 'lists link image table code',
            toolbar: 'bold italic underline | alignleft aligncenter alignright | bullist numlist | link image table | code',
            content_style: 'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }',
            valid_elements: '*[*]',
            extended_valid_elements: '*[*]'
        });
    </script>
</head>
<body>
<div id="app" class="container mt-5">
    <h1 class="title has-text-centered">VelySend</h1>

    <!-- Configuration SMTP -->
    <div id="smtp-config" class="box hidden">
        <h2 class="subtitle">Configurer un Compte SMTP</h2>
        <div class="field">
            <label class="label">Nom du compte</label>
            <input id="smtp-name" class="input" type="text" placeholder="Nom du compte SMTP">
        </div>
        <div class="field">
            <label class="label">Serveur SMTP</label>
            <input id="smtp-server" class="input" type="text" placeholder="smtp.example.com">
        </div>
        <div class="field">
            <label class="label">Port</label>
            <input id="smtp-port" class="input" type="number" placeholder="587">
        </div>
        <div class="field">
            <label class="label">Nom d'utilisateur</label>
            <input id="smtp-username" class="input" type="text" placeholder="Votre nom d'utilisateur SMTP">
        </div>
        <div class="field">
            <label class="label">Mot de passe</label>
            <input id="smtp-password" class="input" type="password" placeholder="Mot de passe SMTP">
        </div>
        <div class="field">
            <label class="checkbox">
                <input id="smtp-ssl" type="checkbox"> SSL/TLS
            </label>
        </div>
        <button id="save-smtp-btn" class="button is-primary">Enregistrer</button>
    </div>

    <!-- Interface d'envoi d'email -->
    <div id="email-send" class="box hidden">
        <h2 class="subtitle">Envoyer un Email</h2>
        <div class="field">
            <label class="label">Compte SMTP</label>
            <div class="select">
                <select id="smtp-account">
                    <option>Sélectionnez un compte SMTP</option>
                </select>
            </div>
            <button id="delete-smtp-btn" class="button is-danger is-small mt-2">Supprimer le compte</button>
            <button id="add-smtp-btn" class="button is-info is-small mt-2">Ajouter un compte</button>
        </div>
        <div class="field">
            <label class="label">Destinataire</label>
            <input id="email-to" class="input" type="email" placeholder="exemple@domaine.com">
        </div>
        <div class="field">
            <label class="label">Sujet</label>
            <input id="email-subject" class="input" type="text" placeholder="Sujet de l'email">
        </div>
        <div class="field">
            <label class="label">Contenu</label>
            <textarea id="email-body" class="textarea"></textarea>
        </div>
        <div class="field">
            <label class="label">Pièces jointes</label>
            <form action="/" class="dropzone" id="attachments"></form>
        </div>
        <button id="send-btn" class="button is-primary">Envoyer</button>
    </div>
</div>
<script src="renderer.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.2/min/dropzone.min.js"></script>
<script>
    Dropzone.autoDiscover = false;
    const dropzone = new Dropzone("#attachments", {
        url: "/file/post",
        autoProcessQueue: false,
        addRemoveLinks: true,
        init: function () {
            this.on("addedfile", file => {
                console.log("Fichier ajouté : ", file.name);
            });
        }
    });
</script>
</body>
</html>
